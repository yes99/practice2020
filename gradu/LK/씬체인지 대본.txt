
씬체인지는 기본적으로 psnr을 이요한다. 
1. 사용 목적: 생성 혹은 압축된 영상의 화질에 대한 손실 정보를 평가.

2. 의미: 손실이 적을 수록 (화질이 좋을 수록) 높은 값.

3. 주의: 무손실 영상의 경우, MSE가 0이 되기 때문에 PSNR을 정의할 수 없다.
ㄴ 평균 제곱 오차
ㄴ두 영상 간의 각각의 픽셀 값 간의 차이

이리하여, 장면이 편집을 통해서 크게 전환될때는
앞뒤 프레임의 psnr수치가 일시적으로 올라가는 것을 이요해서 화면 전환을 탐지했다. 

여기서는 좀더 정밀하게 멈추게 하기 위하여 앞 뒤 psnr의 값의 차이의 변화를 이용하여서 화면 탐지의 정교성을 더 늘렸다. 

첫번째 만든 것에서는 단순히 수치만을 비교하니, 영상에서 특정구간에서 장면이 전환되지 않는 경우에도 psnr의 차이 수치가 비정상 적으로 상승하는 구간이 있었고 이럴 경우에는 장면이 의미 없이 멈추는 경우가 많아서

이를 완화시키기 위하여 5개의 연속된 이미지의 평균 psnr 수치를 구해서 의미없이 증가하는 부분을 최대한 완화시켰다. 


씬체인지는 기본적으로 psnr을 이용한다. 
psnr은 생성 혹은 압축된 영상의 화질에 대한 손실 정보를 평가하는 것인데 어디까지나 수치와 관련 된 것이지 사람의 눈으로는 분간이 가지 않는다. psnr의 손실이 적을수록 화질이 좋을수록 높은 값이 나온다. 무손실 영상일 경우에는 두 영상 각각 픽셀값의 차이, 평균제곱오차가 0이 되기 때문에  psnr을 정의할수 없다. 

이리 하여 장면이 편집을 통해서 크게 전환될때는 앞뒤 프레임의 픽셀 값간의 차이가 한순간 변동하는 하게 된다. 

현재 코드에서는 좀더 정밀하게 장면전환을 감지하기 위해서 psnr의 수치가 일정을 넘으면 멈추게 하는 것이 아니라, 앞 뒤 프레임의 psnr을 비교하여서, 그 차이가 일정 수치를 넘으면 화면을 정지하게 했다. 

하지만 위와 같이 했을 경우에는, 가끔 의미 없는 장면에서 psnr의 수치가 이상하게 올라가는 경우를 캐치하지 못하는 경우가 생긴다. 

이를 완화하기 위하여 5개의 연속된 이미지를 리스트화 시켜서 .psnr수치를 저장하게 하고, 이의 평균값을 구하고
앞 뒤 평균값의 차이가 일정 이상 넘으면 화면이 전환되도록 만들었다. 
이렇게 하면 화면이 확실히 바뀔 경우에는 의미 있는 변화를 보이고

처음 시도했을때 의미없는 구간에서 갑자기 psnr수치가 오르는 것에 대해서 대처할수 있게 되었다. 





마우스 컨트롤은 멈춘 화면에서 마우스로 지정한 영역에 surf를 적용하기 위해 사용한다. 
우선은 멈춘 화면에서 새로운 창에 해당 멈춘 프레임을 표시하고  그 안에서 마우스 컨트롤을 할수 있게 만든다. 
처음 마우스를 누른 지점의  x y좌표를 받아오고, 마우스를 땠을때의 x y 좌표를 받아와서 해당 대각선상의 두점을 중심으로 사각형을 만들고, 해당 마우스 지정영역을 잘라와서 새로운 query라고 저장을 하고 surf를 이어갈수 잇게 해준다. 

초창기 개발단계에서는 진행하는 동영상 그 자체에서 마우스 드래그를 적용하려고 했지만, 
동영상이 멈춘 그 화면에 마우스가 적용 가능하는데 오류가 지속적으로 발생해서
마우스컨트롤이 적용가능한 화면을 해당 멈춘 프레임을 복사해서 가져와서 그 안에서 직사각형을 만드는 것으로 설계를 하였다. 
 
